<html xmlns="http://www.w3.org/1999/html">

<head>

    <link rel="stylesheet" href='../css/layui.css'/>
    <link rel="stylesheet" href="../css/homePage.css"/>

    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type='text/javascript' src="../js/layui.all.js"></script>
    <script type="text/javascript" src="../js/echarts.js"></script>
    <!--    <script type='text/javascript' src="../js/lay/modules/laydate.js"></script>-->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<!--    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">-->
    <title>首页</title>

</head>

<body>

<!-- 动态数据监控 -->

<div class="dynamic_data_watch">
    <div></div>
    <span>动态数据监控</span>
    <i class="layui-icon">&#xe615;</i>
</div>
<div class="module_line1">
    <a class="service_company" href="javascript:;">
        <div class="item1_title">劳务公司<span>(单位:个)</span></div>
        <div class="item1_cont"><span>57</span><span>/</span>
            <div><span>较昨日</span><span>  上升1</span></div>
        </div>
    </a>
    <a class="present_person" href="javascript:;">
        <div class="item1_title">在场人员<span>(单位:人)</span></div>
        <div class="item1_cont"><span>1200</span><span>/</span>
            <div><span>较昨日</span><span>  上升10</span></div>
        </div>
    </a>
    <a class="attend_situation" href="javascript:;">
        <div class="item2_title">出勤情况<span>(出勤/在场)</span></div>
        <div class="item2_cont1"><span>1200</span><span>/</span><span>1000</span></div>
        <div class="item2_cont2">出勤率</div>
        <div class="layui-progress" lay-showPercent="yes" lay-filter="attend_situation">
            <div class="layui-progress-bar layui-bg-blue"></div>
        </div>
        <span>90%</span>
    </a>
    <a class="prew_work_train" href="javascript:;">
        <div class="item2_title">班前教育<span>(签到/出勤)</span></div>
        <div class="item2_cont1"><span>800</span><span>/</span><span>900</span></div>
        <div class="item2_cont2">覆盖率</div>
        <div class="layui-progress" lay-showPercent="yes" lay-filter="prew_work_train">
            <div class="layui-progress-bar layui-bg-blue"></div>
        </div>
        <span>90%</span>
    </a>
</div>
<div class="module_line2">
    <div class="data_static">
        <a id="contract_cover_rate" href="javascript:;"></a>
        <a id="work_train_rate" href="javascript:;"></a>
        <a id="salary_paid_rate" href="javascript:;"></a>
    </div>
    <div class="warn_notice">
        <div class="notice_title">
            <a href="javascript:;">消息通知</a><a href="javascript:;">预警</a>
        </div>
        <a href="javascript:;">
            <span>1</span><span>详细内容... ...</span><span>17:45</span>
        </a>
        <a href="javascript:;">
            <span>2</span><span>详细内容... ...</span><span>17:45</span>
        </a>
        <a href="javascript:;">
            <span>3</span><span>详细内容... ...</span><span>17:45</span>
        </a>
        <a href="javascript:;">
            <span>4</span><span>详细内容... ...</span><span>17:45</span>
        </a>
        <a href="javascript:;">
            <span>5</span><span>详细内容... ...</span><span>17:45</span>
        </a>
    </div>
    <div class="cover_info">
        <div>进场人数：20290</div>
        <div>教育人数：19270</div>
    </div>
    <div class="train_info">
        <div>进场人数：20290</div>
        <div>教育人数：19270</div>
    </div>
    <div class="paid_info">
        <div>进场人数：20290</div>
        <div>教育人数：19270</div>
    </div>

</div>
<div class="dynamic_data_watch">
    <div></div>
    <span>动态数据分析</span>
</div>
<div class="module_line3">
    <div class="dynamic_data_content">
        <div class="data_title">
            <a href="javascript:;" id="safe_line">安全行为动态</a>
            <a href="javascript:;" id="attend_line">在场人员动态</a>
            <a href="javascript:;" id="paid_line">工资发放动态</a>
            <div class="switch_date">
                <a href="javascript:;">年</a>
                <a href="javascript:;">月</a>
            </div>

            <input type="text" id="choose_date" class="layui-input choose_date">


        </div>
        <div id="data_table"></div>

    </div>
    <div class="data_static_summary">
        <div class="summary_title">
            <span>累计数据统计</span><a href="javascript:;" >更多></a>
        </div>
        <a href="javascript:;" >
            <img src=""><span>累计进场人数</span><span>17483</span><span>人</span>
        </a>
        <a href="javascript:;" >
            <img src=""><span>累计退场人数</span><span>17483</span><span>人</span>
        </a>
        <a href="javascript:;" >
            <img src=""><span>累计发放工资</span><span>17483</span><span>万元</span>
        </a>
        <a href="javascript:;" >
            <img src=""><span>权益举报</span><span>17483</span><span>次</span>
        </a>
        <a href="javascript:;" >
            <img src=""><span>黑名单人数</span><span>17483</span><span>人</span>
        </a>
    </div>
</div>
</body>
<script>
    // var width = parseInt(window.screen.width);
    // var scale = width / 1839;
    // let a="<meta name='viewport' content='device-width,initial-scale="+scale+",minimum-scale="+scale+",maximum-scale="+ scale + ",target-densitydpi=device-dpi'>"
    // document.write(a)
    $().ready(function () {

        let myDate = new Date;
        let year = myDate.getFullYear(); //获取当前年
        let mon = myDate.getMonth() + 1; //获取当前月
        $("#choose_date").val(year + '-' + mon);
        layui.use(['element', 'laydate'], function () {
            let element = layui.element;
            element.progress('attend_situation', "90%");
            element.progress('prew_work_train', "90%");
            let layDate = layui.laydate;
            layDate.render({
                elem: '#choose_date', //指定元素
                type: 'month',
            });
        });


        let cover_rate = echarts.init(document.getElementById("contract_cover_rate"));//实例初始化
        let train_rate = echarts.init(document.getElementById("work_train_rate"));//实例初始化
        let paid_rate = echarts.init(document.getElementById("salary_paid_rate"));//实例初始化
        let cover_option = {
            text: "合同覆盖率",
            color: ['#17c7cd', '#ecf0f1'],
            value: 87,
        }
        let train_option = {
            text: "进场教育覆盖率",
            color: ['#ffcc01', '#ecf0f1'],
            value: 80,
        }
        let paid_option = {
            text: "薪酬支付覆盖率",
            color: ['#f76c32', '#ecf0f1'],
            value: 87,
        }

        //饼状图

        function option(option_data) {
            let that = option_data;
            let option = {
                backgroundColor: 'white',
                color: that.color,
                title: {
                    text: that.text,
                    top: '21px',
                    left: '28px',
                    textStyle: {
                        color: '#000000',//标题颜色
                        fontStyle: 'normal',
                        fontWeight: 'normal',
                        fontFamily: 'PingFangSC-Regular',
                        fontSize: 18,
                    }
                },
                series: [{
                    name: '来源',
                    type: 'pie',
                    radius: ['65px', '80px'],
                    // startAngle:0,//起始角度
                    startAngle: (that.value - 100) / 100 * 180,//起始角度
                    avoidLabelOverlap: false,
                    hoverAnimation: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center',
                            textStyle: {
                                fontSize: 16,
                                fontWeight: 'bold'
                            },
                            formatter: '{b}\n{c}%'
                        }
                    },
                    data: [{
                        value: that.value,
                        name: "",
                        label: {
                            normal: {
                                show: true,
                                color: 'black',//内部字体颜色
                            }
                        }
                    },
                        {
                            value: 100 - that.value,
                            name: '',
                        }

                    ]
                }]
            };
            return option;
        }

        cover_rate.setOption(option(cover_option))
        train_rate.setOption(option(train_option))
        paid_rate.setOption(option(paid_option))
        //折线图
        let data_table = echarts.init(document.getElementById("data_table"));//实例初始化
        let safe_line = {
            data_name1: '良好行为',
            data_name2: '不良行为',
            y_data1: [120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210],
            y_data2: [220, 182, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310],
            x_axis: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
        }

        let attend_line = {
            data_name1: '在场人数',
            data_name2: '不在场人数',
            y_data1: [120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210],
            y_data2: [220, 182, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310],
            x_axis: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
        }
        let paid_line = {
            data_name1: '累计应发',
            data_name2: '实际发放',
            y_data1: [1200, 1320, 1010, 1340, 900, 2300, 2100, 1200, 1320, 1010, 1340, 900],
            y_data2: [2200, 1820, 1910, 2340, 2900, 3300, 3100, 191, 2340, 2900, 3300, 3100],
            x_axis: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
        }

        function option_line(option_data) {
            let option_line = {
                title: {
                    text: null,
                },
                tooltip: {
                    trigger: 'axis'
                },

                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: option_data.x_axis,
                },
                yAxis: {
                    type: 'value',

                },
                series: [
                    {
                        name: option_data.data_name1,
                        type: 'line',
                        stack: '总量',
                        data: option_data.y_data1,
                        // data: [120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134, 90, 230, 210]
                    },
                    {
                        name: option_data.data_name2,
                        type: 'line',
                        stack: '总量',
                        data: option_data.y_data2,
                        // data: [220, 182, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310, 191, 234, 290, 330, 310]
                    }
                ]
            };
            return option_line;
        }
        data_table.setOption(option_line(safe_line))
        $("#safe_line").click(function(){
            data_table.setOption(option_line(safe_line))
        })
        $("#attend_line").click(function(){
            data_table.setOption(option_line(attend_line))
        })

        $("#paid_line").click(function(){
            data_table.setOption(option_line(paid_line))
        })


    })
</script>

</html>
